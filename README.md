# ü¶ú Hhrrr Pavilion
–ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –∞–Ω–æ–Ω–∏–º–Ω—ã–π —á–∞—Ç —Å —Ä–∞–Ω–¥–æ–º–Ω—ã–º–∏ –∏–º–µ–Ω–∞–º–∏ –∏ —á–∏—Å—Ç—ã–º –¥–∏–∑–∞–π–Ω–æ–º.

[https://hhrrr.ru/pavilion/](Hhrrr.ru/Pavilion)

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
* **–ê–Ω–æ–Ω–∏–º–Ω–æ—Å—Ç—å** ‚Äî —Ä–∞–Ω–¥–æ–º–Ω—ã–µ –∏–º–µ–Ω–∞ —Å —ç–º–æ–¥–∑–∏ –∏–∑ `user_names.json` (üê∫ –≤—É–ª—å–≤, ü¶ä –ª–∏—Å—É—Å, ü¶â —Å–æ–≤—É–Ω...)
* **–í—Å—Ç–∞–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** ‚Äî Cmd/Ctrl+V –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –∫–∞—Ä—Ç–∏–Ω–æ–∫ –∏–∑ –±—É—Ñ–µ—Ä–∞ –ø—Ä—è–º–æ –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞
* **–ö–∞–ø–∏—Ç–∞–Ω—Å–∫–∞—è —Ä—É–±–∫–∞** ‚Äî —Å–∏—Å—Ç–µ–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
* **–ü–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫** ‚Äî Shift+Enter –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∞–±–∑–∞—Ü–µ–≤ –≤–Ω—É—Ç—Ä–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
* **–ê—É–¥–∏–æ–ø–ª–µ–µ—Ä** ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–ª–µ–µ—Ä —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ–º, –ø–µ—Ä–µ–º–æ—Ç–∫–æ–π –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ–º —Ç—Ä–µ–∫–æ–≤
* **Night Shift —Ä–µ–∂–∏–º** ‚Äî —Ç—ë–ø–ª—ã–π –æ–≤–µ—Ä–ª–µ–π –¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è –≤ —Ç—ë–º–Ω–æ–µ –≤—Ä–µ–º—è —Å—É—Ç–æ–∫
* **Markdown —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∫–∞ bold (`**—Ç–µ–∫—Å—Ç**`), italic (`*—Ç–µ–∫—Å—Ç*`), code (`` `–∫–æ–¥` ``)
* **WYSIWYG —Ä–µ–¥–∞–∫—Ç–æ—Ä** ‚Äî live preview markdown –ø—Ä–∏ –≤–≤–æ–¥–µ
* **–ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏** ‚Äî Cmd/Ctrl+B (bold), Cmd/Ctrl+I (italic), Cmd/Ctrl+E (code), Cmd/Ctrl+Z (undo), Cmd/Ctrl+Shift+Z (redo), Ctrl+U (–æ—á–∏—Å—Ç–∏—Ç—å —Å—Ç—Ä–æ–∫—É)
* **–ú–µ–Ω—é —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** ‚Äî –≤—Å–ø–ª—ã–≤–∞—é—â–∞—è –ø–∞–Ω–µ–ª—å –ø—Ä–∏ –≤—ã–¥–µ–ª–µ–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞ (B, i, code)
* **Undo/Redo** ‚Äî –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–æ 50 —à–∞–≥–æ–≤
* **–ê–≤—Ç–æ–ø—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** ‚Äî —Å—Å—ã–ª–∫–∏ –Ω–∞ .png/.jpg/.gif/.webp –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–∞–∫ –∫–∞—Ä—Ç–∏–Ω–∫–∏
* **Inline –∫–æ–º–∞–Ω–¥—ã** ‚Äî —Å–∏—Å—Ç–µ–º–∞ `/music: Artist ‚Äì Track` –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–µ–∫–æ–≤
* **–ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –¥–∏–∑–∞–π–Ω** ‚Äî Georgia 18px, –±–µ–∑ —Ä–∞–º–æ–∫ –∏ —Å–∫—Ä–æ–ª–ª–±–∞—Ä–æ–≤
* **–ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏** ‚Äî fade-in –ø–æ—è–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π, –≥—Ä–∞–¥–∏–µ–Ω—Ç —Ä–∞—Å—Ç–≤–æ—Ä–µ–Ω–∏—è –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
* **–£–º–Ω–∞—è —Ñ–æ—Ä–º–∞ –≤–≤–æ–¥–∞** ‚Äî –∫–Ω–æ–ø–∫–∞ [–æ—Ç–ø—Ä–∞–≤–∏—Ç—å] –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤–≤–æ–¥–µ —Ç–µ–∫—Å—Ç–∞
* **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ —Å–µ—Å—Å–∏–∏** ‚Äî –∏—Å—Ç–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ cookie
* **Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** ‚Äî polling –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã

## Inline Commands System

–°–∏—Å—Ç–µ–º–∞ –∫–æ–º–∞–Ω–¥ —Å —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –ø—Ä—è–º–æ –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞:

## –í—Å—Ç–∞–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

–°–∏—Å—Ç–µ–º–∞ –≤—Å—Ç–∞–≤–∫–∏ –∫–∞—Ä—Ç–∏–Ω–æ–∫ –∏–∑ –±—É—Ñ–µ—Ä–∞ –æ–±–º–µ–Ω–∞:

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
- **Cmd/Ctrl+V** —Å –∫–∞—Ä—Ç–∏–Ω–∫–æ–π –≤ –±—É—Ñ–µ—Ä–µ ‚Üí –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Ç–µ–≥ `[–∫–∞—Ä—Ç–∏–Ω–∫–∞]`
- **–ß—ë—Ä–Ω—ã–π —Ü–≤–µ—Ç** ‚Üí –∫–∞—Ä—Ç–∏–Ω–∫–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- **–§–∏–æ–ª–µ—Ç–æ–≤—ã–π —Ü–≤–µ—Ç** (iris) ‚Üí –∫–∞—Ä—Ç–∏–Ω–∫–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞, –≥–æ—Ç–æ–≤–∞ –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ
- **Backspace** –∑–∞ —Ç–µ–≥–æ–º ‚Üí —É–¥–∞–ª—è–µ—Ç —Ç–µ–≥ —Ü–µ–ª–∏–∫–æ–º + —Ñ–∞–π–ª —Å —Å–µ—Ä–≤–µ—Ä–∞

### –ö–æ–º–ø–æ–Ω–æ–≤–∫–∞
–ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏:
```
–ü—Ä–∏–≤–µ—Ç! –°–º–æ—Ç—Ä–∏—Ç–µ [–∫–∞—Ä—Ç–∏–Ω–∫–∞] –∫–∞–∫–∏–µ –∫—Ä–∞—Å–∏–≤—ã–µ —Ü–≤–µ—Ç—ã [–∫–∞—Ä—Ç–∏–Ω–∫–∞] –∏ –≥—Ä–∏–±–æ—á–∫–∏ [–∫–∞—Ä—Ç–∏–Ω–∫–∞]
```

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏
- **–§–æ—Ä–º–∞—Ç—ã**: PNG, JPEG, GIF, WebP
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä**: 10MB
- **–•—Ä–∞–Ω–µ–Ω–∏–µ**: `/public/assets/images/` —Å UUID –∏–º–µ–Ω–∞–º–∏
- **–ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ**: –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ç–µ–≥–∞ —Ñ–∞–π–ª —Ç–æ–∂–µ —É–¥–∞–ª—è–µ—Ç—Å—è

## –ö–∞–ø–∏—Ç–∞–Ω—Å–∫–∞—è —Ä—É–±–∫–∞

–°–∏—Å—Ç–µ–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏:

### –°–æ–æ–±—â–µ–Ω–∏—è
- **üõ≥Ô∏è –∫–∞–ø–∏—Ç–∞–Ω—Å–∫–∞—è —Ä—É–±–∫–∞: –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è /** ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ
- **üõ≥Ô∏è –∫–∞–ø–∏—Ç–∞–Ω—Å–∫–∞—è —Ä—É–±–∫–∞: —É –Ω–∞—Å –ø—Ä–æ–±–ª–µ–º—ã. [–ø–µ—Ä–µ–æ—Ç–ø—Ä–∞–≤–∏—Ç—å]** ‚Üí –ø—Ä–∏ –æ—à–∏–±–∫–µ –æ—Ç–ø—Ä–∞–≤–∫–∏

### –î–∏–∑–∞–π–Ω
- **–®—Ä–∏—Ñ—Ç**: Sans-serif (–≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç Georgia –≤ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö)
- **–¶–≤–µ—Ç**: Nimbus Dark (#87867F)
- **–°–ø–∏–Ω–Ω–µ—Ä**: 4-—Ñ—Ä–µ–π–º–æ–≤–∞—è –∞–Ω–∏–º–∞—Ü–∏—è (/ ‚Äî \ |)

### `/music:` –∫–æ–º–∞–Ω–¥–∞
- **–ù–∞–≤–∏–≥–∞—Ü–∏—è**: Tab/Arrow Up = –∞–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç –≤–ø–µ—Ä—ë–¥, Arrow Down = —à–∞–≥ –Ω–∞–∑–∞–¥
- **–í–≤–æ–¥ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è**: `/music: J` ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç hint "oy Division" —Å–µ—Ä—ã–º
- **–ê–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç**: `/music: Joy` + Arrow Up ‚Üí `/music: Joy Division ‚Äì `
- **–í–≤–æ–¥ —Ç—Ä–µ–∫–∞**: `/music: Joy Division ‚Äì A` ‚Üí hint "tmosphere" —Å–µ—Ä—ã–º
- **–ü–æ–ª–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ**: –≤—Å—ë –∑–µ–ª—ë–Ω–æ–µ = –∫–Ω–æ–ø–∫–∞ [–æ—Ç–ø—Ä–∞–≤–∏—Ç—å] —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ñ–∏–æ–ª–µ—Ç–æ–≤–æ–π
- **Backspace –∑–∞—â–∏—Ç–∞**: –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å ` ‚Äì ` —É–¥–∞–ª—è–µ—Ç—Å—è –≤–µ—Å—å –±–ª–æ–∫ —Ü–µ–ª–∏–∫–æ–º
- **–ö—É—Ä—Å–æ—Ä**: –Ω–µ –º–æ–∂–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –º–µ–∂–¥—É `‚Äì` –∏ –ø—Ä–æ–±–µ–ª–æ–º

### –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞
- **–§–∏–æ–ª–µ—Ç–æ–≤—ã–π** (`cmd-prefix`): `/music:`
- **–°–µ—Ä—ã–π** (`cmd-hint`): –ø–æ–¥—Å–∫–∞–∑–∫–∏ –∞–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç–∞ (–Ω–µ–≤—ã–¥–µ–ª—è–µ–º—ã–µ)
- **–ß—ë—Ä–Ω—ã–π** (`cmd-query`): –≤–≤–µ–¥—ë–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
- **–ó–µ–ª—ë–Ω—ã–π** (`cmd-suggestion`): –≤–∞–ª–∏–¥–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –∏–∑ –±–∞–∑—ã

### –õ–æ–≥–∏–∫–∞ –∫–Ω–æ–ø–∫–∏ [–æ—Ç–ø—Ä–∞–≤–∏—Ç—å]
- **–û–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç**: `a` ‚Üí –∫–Ω–æ–ø–∫–∞ –≤–∏–¥–Ω–∞ (—Å–µ—Ä–∞—è)
- **–ö–æ–º–∞–Ω–¥–∞**: `/` ‚Üí –∫–Ω–æ–ø–∫–∞ —Å–∫—Ä—ã—Ç–∞
- **–ö–æ–º–∞–Ω–¥–∞**: `/music:` ‚Üí –∫–Ω–æ–ø–∫–∞ —Å–∫—Ä—ã—Ç–∞
- **–ö–æ–º–∞–Ω–¥–∞**: `/music: a` ‚Üí –∫–Ω–æ–ø–∫–∞ –≤–∏–¥–Ω–∞ (—Å–µ—Ä–∞—è)
- **–ü–æ–ª–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞**: `/music: Joy Division ‚Äì Atmosphere` ‚Üí –∫–Ω–æ–ø–∫–∞ —Ñ–∏–æ–ª–µ—Ç–æ–≤–∞—è
- **–ö–Ω–æ–ø–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è**:
  - –ü—Ä–∏ –≤–≤–æ–¥–µ/—É–¥–∞–ª–µ–Ω–∏–∏ —Å–∏–º–≤–æ–ª–æ–≤ (–≤–∫–ª—é—á–∞—è backspace)
  - –ü—Ä–∏ –∞–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç–µ (Tab / Arrow Up)
  - –ü—Ä–∏ –æ—Ç–∫–∞—Ç–µ –Ω–∞–∑–∞–¥ (Arrow Down)

### –ë–∞–∑–∞ –º—É–∑—ã–∫–∏
`/public/data/music-test.json` ‚Äî 10 –∞—Ä—Ç–∏—Å—Ç–æ–≤ √ó 10 —Ç—Ä–µ–∫–æ–≤ (Joy Division, The Cure, Radiohead, –ö–∏–Ω–æ, –ê–∫–≤–∞—Ä–∏—É–º...)

## –ê—É–¥–∏–æ–ø–ª–µ–µ—Ä

–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–ª–µ–µ—Ä –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –º—É–∑—ã–∫–∏ –∏–∑ –∫–æ–º–∞–Ω–¥—ã `/music:`.

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- **Play/Pause** ‚Äî –∫–Ω–æ–ø–∫–∞ 32x32px —Å SVG –∏–∫–æ–Ω–∫–∞–º–∏, –≤—ã—Ö–æ–¥–∏—Ç –Ω–∞ 10px –∑–∞ –ª–µ–≤—É—é –≥—Ä–∞–Ω–∏—Ü—É –ø–ª–µ–µ—Ä–∞
- **–ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä** ‚Äî –≤–∏–¥–µ–Ω –ø—Ä–∏ hover –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–∏, –∫–ª–∏–∫–∞–±–µ–ª–µ–Ω –¥–ª—è –ø–µ—Ä–µ–º–æ—Ç–∫–∏
- **Drag & Drop** ‚Äî –º–æ–∂–Ω–æ –∑–∞–∂–∞—Ç—å –∏ —Ç–∞—â–∏—Ç—å –ø–æ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—É –¥–ª—è –ø–µ—Ä–µ–º–æ—Ç–∫–∏
- **–¢–∞–π–º–µ—Ä** ‚Äî –æ–±—Ä–∞—Ç–Ω—ã–π –æ—Ç—Å—á—ë—Ç —Å –º–∏–Ω—É—Å–æ–º –ø—Ä–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–∏ (`-04:19`), –±–µ–∑ –º–∏–Ω—É—Å–∞ –Ω–∞ –ø–∞—É–∑–µ (`04:19`)
- **–¶–≤–µ—Ç–æ–≤—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã**:
  - –¢–∞–π–º–µ—Ä: Wisteria –Ω–∞ –ø–∞—É–∑–µ ‚Üí Iris –ø—Ä–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–∏
  - –ö–Ω–æ–ø–∫–∞: Wisteria ‚Üí Iris –ø—Ä–∏ hover
- **–ö–Ω–æ–ø–∫–∞ "–°–∫–∞—á–∞—Ç—å"** ‚Äî –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤–Ω–∏–∑—É —Å–ø—Ä–∞–≤–∞ –ø—Ä–∏ hover –Ω–∞ –ø–ª–µ–µ—Ä
- **–û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ** ‚Äî —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø–ª–µ–µ—Ä –∞–∫—Ç–∏–≤–µ–Ω

### –î–∏–∑–∞–π–Ω
- **–†–∞–∑–º–µ—Ä—ã**: 360px —à–∏—Ä–∏–Ω–∞, 60px –≤—ã—Å–æ—Ç–∞
- **–®—Ä–∏—Ñ—Ç**: Ubuntu Mono 13px
- **–°–∫—Ä—É–≥–ª–µ–Ω–∏–µ**: 16px (iOS-—Å—Ç–∏–ª—å)
- **–¶–≤–µ—Ç–∞**: Wisteria (#BDBCE4), Iris (#5A57D9), Cloud Light (#FAF9F5)

### –§–∞–π–ª—ã
- `public/js/audio-player.js` ‚Äî –ª–æ–≥–∏–∫–∞ –ø–ª–µ–µ—Ä–∞ (AudioPlayer class, AudioPlayerManager)
- `public/js/music.js` ‚Äî —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ HTML –ø–ª–µ–µ—Ä–∞
- `public/css/audio-player.css` ‚Äî —Å—Ç–∏–ª–∏
- `public/js/audio-mapping.js` ‚Äî –º–∞–ø–ø–∏–Ω–≥ —Ç—Ä–µ–∫–æ–≤ –∫ —Ñ–∞–π–ª–∞–º
- `public/assets/*.mp3` ‚Äî –∞—É–¥–∏–æ—Ñ–∞–π–ª—ã

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
* **Backend:** PHP 8.5+, SQLite
* **Frontend:** Vanilla JS ES6 modules, contenteditable –¥–ª—è WYSIWYG, Georgia + Ubuntu Mono
* **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** Repository pattern, REST API, –º–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/listeomin/pavilion.git
cd pavilion

# –ó–∞–ø—É—Å—Ç–∏—Ç—å dev server
php -S localhost:8000 -t public router.php

# –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
open http://localhost:8000
```

### –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
```bash
php seed_messages.php
```

### Production (nginx)
–ù–∞ production —Å–µ—Ä–≤–µ—Ä–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å nginx –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å `/pavilion/` –ø—É—Ç—ë–º.
–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
```nginx
location /pavilion {
    alias /path/to/pavilion/public;
    try_files $uri $uri/ /pavilion/index.php?$args;
    
    location ~ \.php$ {
        fastcgi_pass unix:/var/run/php/php8.5-fpm.sock;
        fastcgi_param SCRIPT_FILENAME $request_filename;
        include fastcgi_params;
    }
}
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
pavilion/
‚îú‚îÄ‚îÄ .gitignore              # –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã (*.sqlite, .DS_Store)
‚îú‚îÄ‚îÄ README.md               # –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ router.php              # —Ä–æ—É—Ç–µ—Ä –¥–ª—è PHP dev server
‚îú‚îÄ‚îÄ seed_messages.php       # —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
‚îú‚îÄ‚îÄ public/                 # —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ (document root)
‚îÇ   ‚îú‚îÄ‚îÄ index.php          # –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îú‚îÄ‚îÄ css/               # —Å—Ç–∏–ª–∏ (–º–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base.css       # —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏—è, layout, –æ–±—â–∏–µ —Å—Ç–∏–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chat.css       # —Å–æ–æ–±—â–µ–Ω–∏—è, –∞–Ω–∏–º–∞—Ü–∏–∏, –≥—Ä–∞–¥–∏–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ input.css      # —Ñ–æ—Ä–º–∞ –≤–≤–æ–¥–∞, –∫–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ format-menu.css # –≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ –º–µ–Ω—é —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ js/                # –ª–æ–≥–∏–∫–∞ (ES6 –º–æ–¥—É–ª–∏)
‚îÇ       ‚îú‚îÄ‚îÄ config.js      # –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—É—Ç–µ–π (localhost vs production)
‚îÇ       ‚îú‚îÄ‚îÄ api.js         # API –∑–∞–ø—Ä–æ—Å—ã (init, send, poll, cookies)
‚îÇ       ‚îú‚îÄ‚îÄ markdown.js    # –ø–∞—Ä—Å–∏–Ω–≥ markdown, linkify –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚îÇ       ‚îú‚îÄ‚îÄ render.js      # —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å–æ–æ–±—â–µ–Ω–∏–π, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ UI
‚îÇ       ‚îú‚îÄ‚îÄ editor.js      # Editor class (cursor, history, undo/redo)
‚îÇ       ‚îú‚îÄ‚îÄ format.js      # FormatMenu class (–≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ –º–µ–Ω—é)
‚îÇ       ‚îú‚îÄ‚îÄ hotkeys.js     # –≥–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ (Cmd+B/I/E, Enter, Undo/Redo)
‚îÇ       ‚îî‚îÄ‚îÄ main.js        # entry point (68 —Å—Ç—Ä–æ–∫)
‚îî‚îÄ‚îÄ server/                 # –±—ç–∫–µ–Ω–¥
    ‚îú‚îÄ‚îÄ api.php            # REST API (init, send, poll)
    ‚îú‚îÄ‚îÄ db.php             # –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ SQLite + –º–∏–≥—Ä–∞—Ü–∏–∏
    ‚îú‚îÄ‚îÄ SessionRepository.php   # —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏
    ‚îú‚îÄ‚îÄ MessageRepository.php   # —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
    ‚îî‚îÄ‚îÄ user_names.json    # —Å–ø–∏—Å–æ–∫ —Ä–∞–Ω–¥–æ–º–Ω—ã—Ö –∏–º—ë–Ω —Å —ç–º–æ–¥–∑–∏
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

### –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
–ö–æ–¥ —Ä–∞–∑–±–∏—Ç –Ω–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –º–æ–¥—É–ª–∏ —Å —á–µ—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:

**CSS –º–æ–¥—É–ª–∏:**
- `base.css` ‚Äî –±–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏, —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏—è, layout
- `chat.css` ‚Äî —Å—Ç–∏–ª–∏ —á–∞—Ç–∞, –∞–Ω–∏–º–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- `input.css` ‚Äî —Å—Ç–∏–ª–∏ —Ñ–æ—Ä–º—ã –≤–≤–æ–¥–∞
- `format-menu.css` ‚Äî —Å—Ç–∏–ª–∏ –≤—Å–ø–ª—ã–≤–∞—é—â–µ–≥–æ –º–µ–Ω—é

**JS –º–æ–¥—É–ª–∏ (ES6):**
- `config.js` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `api.js` ‚Äî —Ä–∞–±–æ—Ç–∞ —Å API, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ cookies
- `markdown.js` ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ markdown, –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Å—ã–ª–æ–∫/–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- `render.js` ‚Äî —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ DOM, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
- `editor.js` ‚Äî –∫–ª–∞—Å—Å Editor –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å contenteditable
- `format.js` ‚Äî –∫–ª–∞—Å—Å FormatMenu –¥–ª—è –≤—Å–ø–ª—ã–≤–∞—é—â–µ–≥–æ –º–µ–Ω—é
- `hotkeys.js` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≥–æ—Ä—è—á–∏—Ö –∫–ª–∞–≤–∏—à
- `main.js` ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**sessions**
- `id` (TEXT, PRIMARY KEY) ‚Äî UUID —Å–µ—Å—Å–∏–∏
- `name` (TEXT, UNIQUE) ‚Äî –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (üê∫ –≤—É–ª—å–≤, ü¶ä –ª–∏—Å—É—Å...)
- `created_at` (TEXT) ‚Äî –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è (ISO 8601)

**messages**
- `id` (INTEGER, PRIMARY KEY, AUTOINCREMENT)
- `session_id` (TEXT, FOREIGN KEY ‚Üí sessions.id)
- `author` (TEXT) ‚Äî –∏–º—è –∞–≤—Ç–æ—Ä–∞
- `text` (TEXT) ‚Äî —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
- `created_at` (TEXT) ‚Äî –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è (ISO 8601)

–ë–∞–∑–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ API.

## API

### `GET/POST /server/api.php?action=init`
–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Å—Å–∏–∏. –ï—Å–ª–∏ –µ—Å—Ç—å cookie `chat_session_id` ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é, –∏–Ω–∞—á–µ —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å–æ–æ–±—â–µ–Ω–∏–π.

**Response:**
```json
{
  "session_id": "7e876ec522f8c672956c2b0963c60888",
  "name": "üê∫ –≤—É–ª—å–≤",
  "is_new": false,
  "messages": [...]
}
```

### `POST /server/api.php?action=send`
–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è.

**Request:**
```json
{
  "session_id": "7e876ec522f8c672956c2b0963c60888",
  "text": "–ü—Ä–∏–≤–µ—Ç!"
}
```

**Response:**
```json
{
  "id": 42,
  "session_id": "7e876ec522f8c672956c2b0963c60888",
  "author": "üê∫ –≤—É–ª—å–≤",
  "text": "–ü—Ä–∏–≤–µ—Ç!",
  "created_at": "2025-12-10T14:39:03+00:00"
}
```

### `GET /server/api.php?action=poll&after_id=41`
–ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ—Å–ª–µ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ ID.

**Response:**
```json
{
  "messages": [...]
}
```
